### go-i18n

go语言使用go-i18n国际化组件简单使用方法

**需要导入的第三方库**

```go
import "github.com/nicksnyder/go-i18n/v2/i18n"
```

##### 测试方法

```go
package util

import (
	"github.com/BurntSushi/toml"
	"github.com/nicksnyder/go-i18n/v2/i18n"
	"golang.org/x/text/language"
)

func Test01(messageId string, lang int) string {
	// 创建 Bundle
	bundle := i18n.NewBundle(language.English)

	// 注册解析器
	bundle.RegisterUnmarshalFunc("toml", toml.Unmarshal)

	//// 加载翻译文件
	//translations := []string{
	//	"messages.en.toml",    // 英语翻译文件
	//	"messages.zh-CN.toml", // 简体中文翻译文件
	//}
	//for _, file := range translations {
	//	bundle.MustLoadMessageFile(file)
	//}

	// 创建 Localize
	localize := new(i18n.Localizer)
	if lang == 1 {
		bundle.MustLoadMessageFile("messages.zh-CN.toml")
		localize = i18n.NewLocalizer(bundle, "zh-CN")
	} else {
		bundle.MustLoadMessageFile("messages.en.toml")
		localize = i18n.NewLocalizer(bundle, "en")
	}

	// 执行翻译
	translation := localize.MustLocalize(&i18n.LocalizeConfig{
		MessageID: messageId,
	})

	return translation
}

func Test02(messageId, name string, count, lang int) string {
	// 创建 Bundle
	bundle := i18n.NewBundle(language.English)

	// 注册解析器
	bundle.RegisterUnmarshalFunc("toml", toml.Unmarshal)

	// 加载翻译文件
	translations := []string{
		"messages.en.toml",    // 英语翻译文件
		"messages.zh-CN.toml", // 简体中文翻译文件
	}
	for _, file := range translations {
		bundle.MustLoadMessageFile(file)
	}

	// 创建 Localizer
	localize := new(i18n.Localizer)
	if lang == 1 {
		localize = i18n.NewLocalizer(bundle, "zh-CN")
	} else {
		localize = i18n.NewLocalizer(bundle, "en")
	}

	// 执行翻译
	translation := localize.MustLocalize(&i18n.LocalizeConfig{
		MessageID: messageId,
		TemplateData: map[string]interface{}{
			"Name":  name,
			"Count": count,
		},
		PluralCount: count,
	})

	return translation
}

```

##### main方法

```go
package main

import (
	"fmt"
	"i18n/util"
)

func main() {
	message01 := util.Test01("Tips", 1)
	message02 := util.Test02("Emails", "LiMing", 2, 1)
	fmt.Println(message01)
	fmt.Println(message02)
}

```

##### toml文件


messages.en.toml

```toml
[Emails]
description = "The number of unread emails a user has"
one = "{{.Name}} has {{.Count}} email."
other = "{{.Name}} has {{.Count}} emails."
[Tips]
description  = "An error message"
other = "Preview failed, channel is disabled"
```


messages.zh-CN.toml

```toml
[Emails]
description = "用户未读邮件数量"
one = "{{.Name}} 有 {{.Count}} 封邮件。"
other = "{{.Name}} 有 {{.Count}} 封邮件。"
[Tips]
description = "一个错误提示"
other = "预览失败，通道是禁用状态"
```

##### 运行结果

```
GOROOT=D:\Go\go1.19 #gosetup
GOPATH=C:\Users\swh\go #gosetup
D:\Go\go1.19\bin\go.exe build -o C:\Users\swh\AppData\Local\Temp\GoLand\___1go_build_i18n.exe i18n #gosetup
C:\Users\swh\AppData\Local\Temp\GoLand\___1go_build_i18n.exe
预览失败，通道是禁用状态
LiMing 有 2 封邮件。      

进程 已完成，退出代码为 0

```

